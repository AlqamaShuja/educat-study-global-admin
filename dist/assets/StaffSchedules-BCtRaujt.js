import{j as e,B as h,r as x,y as M,L as pe}from"./index-D_0a8VZH.js";import{a as y,u as je,m as R}from"./useManagerStore-BXFzQXT2.js";import{c as le,v as ne}from"./validators-DJSRcNcx.js";import{C as ee}from"./Card-BZSd9g6-.js";import{M as se}from"./Modal-C-TYXrEH.js";import{I as $}from"./Input-CvXmBRSW.js";import{X as ye}from"./x-DZDe4kcp.js";import{B as W}from"./Badge-DnoA-fpa.js";import{U as z}from"./user-check-dM6SSSkL.js";import{C as L}from"./clock-CRKKHv1b.js";import{S as ve}from"./square-pen-DP2r3-IP.js";import{T as Ne}from"./trash-2-D-1SKTu4.js";import{f}from"./format-CW8_DxCc.js";import{s as we,e as Se,a as Te,C as ke,i as Ce,b as Ie,c as De}from"./subMonths-Boxt7nVc.js";import{C as Me}from"./chevron-right-CqWP2rwp.js";import{i as ie}from"./isSameDay-MFaTNiDj.js";import{C as ce}from"./calendar-CFgP2NK7.js";import{F as Ee}from"./file-text-C1gJtZnp.js";import{P as de}from"./plus-DFJI7CJl.js";import{S as Oe}from"./search-WQZEDZzZ.js";import{c as oe}from"./createLucideIcon-QavIXzvy.js";import"./toDate-BKXxHYqX.js";/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ae=oe("grid-3x3",Fe);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],$e=oe("table",He),ze=({isOpen:T,onClose:c,onConfirm:r,staffName:v})=>T?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Confirm Deletion"}),e.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-700",children:e.jsx(ye,{className:"h-5 w-5"})})]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete the schedule for"," ",e.jsx("span",{className:"font-medium",children:v||"this staff member"}),"?"]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(h,{variant:"outline",onClick:c,children:"Cancel"}),e.jsx(h,{variant:"danger",onClick:r,className:"bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})}):null,Le=({schedules:T=[],onView:c,onEdit:r,onDelete:v,getTypeColor:b,getStatusColor:k,loading:N=!1,className:p=""})=>N?e.jsx("div",{className:`bg-white/90 backdrop-blur-sm rounded-lg shadow-lg ${p}`,children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:[1,2,3].map(a=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-blue-100 rounded w-3/4 animate-pulse"}),e.jsx("div",{className:"h-3 bg-blue-100 rounded w-1/2 animate-pulse"})]})]},a))})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:`bg-white/90 backdrop-blur-sm rounded-lg shadow-lg overflow-hidden ${p}`,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-blue-100",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-50 to-purple-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Staff"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Start Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"End Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Notes"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white/70 backdrop-blur-sm divide-y divide-blue-100",children:T.map(a=>{var w,C;return e.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors duration-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center",children:e.jsx(z,{className:"h-5 w-5 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.staffName||"N/A"}),e.jsx("div",{className:"text-sm text-gray-600",children:a.staffId||"N/A"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:f(new Date(a.startTime),"MMM dd, yyyy")}),e.jsx("div",{className:"text-sm text-gray-600",children:f(new Date(a.startTime),"HH:mm")})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.endTime?f(new Date(a.endTime),"MMM dd, yyyy"):f(y(new Date(a.startTime),1),"MMM dd, yyyy")}),e.jsx("div",{className:"text-sm text-gray-600",children:a.endTime?f(new Date(a.endTime),"HH:mm"):f(y(new Date(a.startTime),1),"HH:mm")})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(W,{className:b(a.type),children:((w=a.type)==null?void 0:w.replace("_"," ").toUpperCase())||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(W,{className:new Date(a.endTime||y(new Date(a.startTime),1))<new Date&&a.status==="scheduled"?k("no_show"):k(a.status),children:new Date(a.endTime||y(new Date(a.startTime),1))<new Date&&a.status==="scheduled"?"NO SHOW":((C=a.status)==null?void 0:C.replace("_"," ").toUpperCase())||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:a.notes||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>c(a),className:"p-1",title:"View details",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>r(a),className:"p-1",title:"Edit schedule",children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>v(a),className:"p-1 text-red-600 hover:text-red-700",title:"Delete schedule",children:e.jsx(Ne,{className:"h-4 w-4"})})]})})]},a.id)})})]})}),T.length===0&&!N&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(z,{className:"h-8 w-8 text-blue-500"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No schedules found"}),e.jsx("p",{className:"text-gray-600",children:"There are no schedules to display at the moment."})]})]})}),Pe=({schedules:T=[],onScheduleClick:c,getTypeColor:r,getStatusColor:v})=>{const[b,k]=x.useState(new Date),N=we(b),p=Se(b),a=Te({start:N,end:p}),w=i=>T.filter(P=>{const I=new Date(P.startTime);return ie(I,i)}),C=i=>{switch(i){case"shift":return"bg-blue-500";case"meeting":return"bg-green-500";case"training":return"bg-yellow-500";case"leave":return"bg-red-500";default:return"bg-gray-500"}},S=()=>k(De(b,1)),j=()=>k(Ie(b));return e.jsx(ee,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Calendar View"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click on any schedule to view details"})]}),e.jsxs("div",{className:"bg-white rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ke,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:f(b,"MMMM yyyy")}),e.jsx("button",{onClick:S,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Me,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-px bg-gray-200",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(i=>e.jsx("div",{className:"bg-gray-50 p-2 text-center text-sm font-medium text-gray-700",children:i},i)),a.map((i,P)=>{const I=w(i),G=Ce(i,b),V=ie(i,new Date);return e.jsxs("div",{className:`min-h-[120px] p-2 bg-white ${G?"text-gray-900":"text-gray-400"} ${V?"bg-blue-50":""}`,children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:f(i,"d")}),e.jsxs("div",{className:"space-y-1",children:[I.slice(0,3).map(m=>{var E;const D=m.endTime?new Date(m.endTime):y(new Date(m.startTime),1);return e.jsxs("div",{onClick:()=>c(m),className:`p-1 rounded text-xs cursor-pointer hover:opacity-80 transition-opacity ${C(m.type)} text-white`,title:`${m.staffName||"Unknown"} - ${(E=m.type)==null?void 0:E.replace("_"," ")} (${f(new Date(m.startTime),"HH:mm")} - ${f(D,"HH:mm")})`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"h-2 w-2 mr-1"}),e.jsx("span",{className:"truncate",children:m.staffName||"Unknown"})]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(L,{className:"h-2 w-2 mr-1"}),e.jsx("span",{className:"truncate text-xs",children:f(new Date(m.startTime),"HH:mm")})]})]},m.id)}),I.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",I.length-3," more"]})]})]},P)})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded mr-2"}),e.jsx("span",{children:"Shift"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded mr-2"}),e.jsx("span",{children:"Meeting"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded mr-2"}),e.jsx("span",{children:"Training"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded mr-2"}),e.jsx("span",{children:"Leave"})]})]})]})})},Ve=({isOpen:T,onClose:c,schedule:r,getTypeColor:v,getStatusColor:b})=>{var C,S;if(!r)return null;const k=j=>{try{const i=new Date(j);return isNaN(i.getTime())?"Invalid Date":f(i,"PPP")}catch{return"Invalid Date"}},N=j=>{try{const i=new Date(j);return isNaN(i.getTime())?"Invalid Time":f(i,"HH:mm")}catch{return"Invalid Time"}},p=()=>r.endTime?new Date(r.endTime):y(new Date(r.startTime),1),a=[{value:"shift",label:"Shift"},{value:"meeting",label:"Meeting"},{value:"training",label:"Training"},{value:"leave",label:"Leave"}],w=[{value:"scheduled",label:"Scheduled"},{value:"completed",label:"Completed"},{value:"canceled",label:"Canceled"},{value:"no_show",label:"No Show"}];return e.jsx(se,{isOpen:T,onClose:c,title:"Schedule Details",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx(z,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:r.staffName||"Unknown Staff"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Staff Member"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsx(W,{className:v(r.type),children:((C=a.find(j=>j.value===r.type))==null?void 0:C.label)||r.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx(W,{className:b(r.status),children:((S=w.find(j=>j.value===r.status))==null?void 0:S.label)||r.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:k(r.startTime)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:N(r.startTime)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:N(p())})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-900",children:[Math.round((p()-new Date(r.startTime))/(1e3*60))," minutes"]})]})]})]})]}),r.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-gray-400 mt-0.5"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg flex-1",children:r.notes})]})]}),r.studentName&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:r.studentName})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:e.jsx("button",{onClick:c,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Close"})})]})})},cs=()=>{const{user:T,consultants:c,schedules:r,setSchedules:v,fetchSchedules:b,fetchOfficeConsultants:k,loading:N,error:p}=je(),[a,w]=x.useState({search:"",staffId:"",date:""}),[C,S]=x.useState(!1),[j,i]=x.useState(!1),[P,I]=x.useState(!1),[G,V]=x.useState(!1),[m,D]=x.useState(null),[E,te]=x.useState(null),[d,X]=x.useState({}),[O,me]=x.useState([]),[_,ae]=x.useState(1),J=10,[F,re]=x.useState("table"),[t,o]=x.useState({studentId:"",staffId:"",startTime:"",endTime:"",type:"shift",status:"scheduled",notes:""}),K=[{value:"shift",label:"Shift",color:"bg-blue-100 text-blue-800"},{value:"meeting",label:"Meeting",color:"bg-green-100 text-green-800"}],Q=[{value:"scheduled",label:"Scheduled",color:"bg-blue-100 text-blue-800"},{value:"completed",label:"Completed",color:"bg-green-100 text-green-800"},{value:"canceled",label:"Canceled",color:"bg-gray-100 text-gray-800"},{value:"no_show",label:"No Show",color:"bg-red-100 text-red-800"}];x.useEffect(()=>{b(),k(),R.getStudents().then(me).catch(s=>{var l,n;M.error(((n=(l=s.response)==null?void 0:l.data)==null?void 0:n.message)||"Failed to fetch students")})},[]),x.useEffect(()=>{p&&M.error(p||"Failed to fetch schedules")},[p]);const xe=async()=>{var l,n;const s=le({...t,endTime:t.endTime||y(new Date(t.startTime),1).toISOString()});if(Object.keys(s).length){X(s);return}try{const H=[await R.createSchedule({...t,studentId:t.studentId,startTime:new Date(t.startTime).toISOString(),endTime:t.endTime?new Date(t.endTime).toISOString():y(new Date(t.startTime),1).toISOString(),notes:ne(t.notes)}),...r];v(H),S(!1),A(),M.success("Schedule added successfully!")}catch(u){M.error(((n=(l=u.response)==null?void 0:l.data)==null?void 0:n.message)||"Failed to add schedule")}},he=async()=>{var l,n;const s=le({...t,endTime:t.endTime||y(new Date(t.startTime),1).toISOString()});if(Object.keys(s).length){X(s);return}try{const u=await R.updateSchedule(m.id,{...t,studentId:t.studentId,startTime:new Date(t.startTime).toISOString(),endTime:t.endTime?new Date(t.endTime).toISOString():y(new Date(t.startTime),1).toISOString(),notes:ne(t.notes)});v(H=>H.map(U=>{var q;return U.id===m.id?{...u,staffName:((q=c.find(be=>be.id===u.staffId))==null?void 0:q.name)||"Unknown"}:U})),i(!1),D(null),A(),M.success("Schedule updated successfully!")}catch(u){M.error(((n=(l=u.response)==null?void 0:l.data)==null?void 0:n.message)||"Failed to update schedule")}},ue=async()=>{var s,l;try{await R.deleteSchedule(E.id),v(n=>n.filter(u=>u.id!==E.id)),I(!1),te(null),M.success("Schedule deleted successfully!")}catch(n){M.error(((l=(s=n.response)==null?void 0:s.data)==null?void 0:l.message)||"Failed to delete schedule")}},ge=s=>{te(s),I(!0)},A=()=>{o({studentId:"",staffId:"",startTime:"",endTime:"",type:"shift",status:"scheduled",notes:""}),X({})};console.log(r,"sakcnsacascnjsncscj");const g=r==null?void 0:r.filter(s=>{const l=!a.search||s.staffName.toLowerCase().includes(a.search.toLowerCase())||s.notes.toLowerCase().includes(a.search.toLowerCase()),n=!a.staffId||s.staffId===a.staffId,u=!a.date||new Date(s.startTime).toDateString()===new Date(a.date).toDateString();return l&&n&&u}),Y=s=>{var l;return((l=K.find(n=>n.value===s))==null?void 0:l.color)||"bg-gray-100 text-gray-800"},Z=s=>{var l;return((l=Q.find(n=>n.value===s))==null?void 0:l.color)||"bg-gray-100 text-gray-800"},B=Math.ceil((g==null?void 0:g.length)/J),fe=g==null?void 0:g.slice((_-1)*J,_*J);return N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(pe,{size:"lg"})}):e.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Staff Schedules"}),e.jsx("p",{className:"text-gray-600",children:"Manage schedules for your team members."})]}),e.jsxs(h,{variant:"primary",onClick:()=>S(!0),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Add Schedule"]})]}),e.jsx(ee,{className:"p-4 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx($,{placeholder:"Search by staff or notes...",value:a.search,onChange:s=>w({...a,search:s.target.value}),className:"pl-10 border-gray-300 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("select",{className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:a.staffId,onChange:s=>w({...a,staffId:s.target.value}),children:[e.jsx("option",{value:"",children:"All Staff"}),c==null?void 0:c.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx($,{type:"date",value:a.date,onChange:s=>w({...a,date:s.target.value}),className:"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[g==null?void 0:g.length," of ",r==null?void 0:r.length," schedules"]})]})}),e.jsxs(ee,{className:"p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Staff Schedules"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(h,{variant:F==="table"?"primary":"outline",size:"sm",onClick:()=>re("table"),className:`flex items-center space-x-2 ${F==="table"?"bg-blue-600 hover:bg-blue-700 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx("span",{children:"Table View"})]}),e.jsxs(h,{variant:F==="calendar"?"primary":"outline",size:"sm",onClick:()=>re("calendar"),className:`flex items-center space-x-2 ${F==="calendar"?"bg-blue-600 hover:bg-blue-700 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Calendar View"})]})]})]}),(g==null?void 0:g.length)===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ce,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No schedules found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:Object.values(a).some(s=>s)?"No schedules match your current filters.":"Add your first schedule to get started."}),e.jsxs(h,{variant:"primary",onClick:()=>S(!0),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Add First Schedule"]})]}):e.jsxs(e.Fragment,{children:[F==="table"&&e.jsx(Le,{schedules:fe,onView:s=>{D(s),V(!0)},onEdit:s=>{const l=new Date(s.startTime),n=s.endTime?new Date(s.endTime):y(l,1);D(s),o({studentId:s.studentId,staffId:s.staffId,startTime:l.toISOString().slice(0,16),endTime:n.toISOString().slice(0,16),type:s.type,status:s.status,notes:s.notes}),i(!0)},onDelete:ge,getTypeColor:Y,getStatusColor:Z,loading:N}),F==="calendar"&&e.jsx(Pe,{schedules:g,onScheduleClick:s=>{D(s),V(!0)},getTypeColor:Y,getStatusColor:Z})]}),F==="table"&&B>1&&e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsx(h,{variant:"outline",onClick:()=>ae(s=>Math.max(s-1,1)),disabled:_===1,className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",_," of ",B]}),e.jsx(h,{variant:"outline",onClick:()=>ae(s=>Math.min(s+1,B)),disabled:_===B,className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Next"})]})]}),e.jsx(se,{isOpen:C,onClose:()=>{S(!1),A()},title:"Add Schedule",size:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student *"}),e.jsxs("select",{className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${d.studentId?"border-red-500":""}`,value:t.studentId,onChange:s=>{var H,U;const l=s.target.value,n=O.find(q=>q.id===l),u=(U=(H=n==null?void 0:n.studentLeads)==null?void 0:H[0])==null?void 0:U.assignedConsultant;console.log(n,"asjnsajcsajcsnacna"),u?o({...t,studentId:l,staffId:u}):(M.error("This student is not assigned to any consultant."),o({...t,studentId:l,staffId:""}))},children:[e.jsx("option",{value:"",children:"Select a student"}),O==null?void 0:O.map(s=>e.jsxs("option",{value:s.id,children:[s.name," - ",s.email]},s.id))]}),d.studentId&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.studentId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Staff Member *"}),e.jsxs("select",{className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${d.staffId?"border-red-500":""}`,value:t.staffId,onChange:s=>o({...t,staffId:s.target.value}),children:[e.jsx("option",{value:"",children:"Select a staff member"}),c==null?void 0:c.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),d.staffId&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.staffId})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time *"}),e.jsx($,{type:"datetime-local",value:t.startTime,onChange:s=>o({...t,startTime:s.target.value,endTime:t.endTime||""}),className:d.startTime?"border-red-500":""}),d.startTime&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.startTime})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),e.jsx($,{type:"datetime-local",value:t.endTime,onChange:s=>o({...t,endTime:s.target.value}),className:d.endTime?"border-red-500":""}),d.endTime&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.endTime})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),e.jsx("select",{className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:t.type,onChange:s=>o({...t,type:s.target.value}),children:K.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),e.jsx("select",{className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:t.status,onChange:s=>o({...t,status:s.target.value}),children:Q.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3,value:t.notes,onChange:s=>o({...t,notes:s.target.value}),placeholder:"Enter any additional notes..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(h,{variant:"outline",onClick:()=>{S(!1),A()},className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx(h,{variant:"primary",onClick:xe,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Add Schedule"})]})]})}),e.jsx(se,{isOpen:j,onClose:()=>{i(!1),D(null),A()},title:"Edit Schedule",size:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student *"}),e.jsxs("select",{className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${d.studentId?"border-red-500":""}`,value:t.studentId,onChange:s=>o({...t,studentId:s.target.value}),children:[e.jsx("option",{value:"",children:"Select a student"}),O==null?void 0:O.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),d.studentId&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.studentId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Staff Member *"}),e.jsxs("select",{className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${d.staffId?"border-red-500":""}`,value:t.staffId,onChange:s=>o({...t,staffId:s.target.value}),children:[e.jsx("option",{value:"",children:"Select a staff member"}),c==null?void 0:c.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),d.staffId&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.staffId})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time *"}),e.jsx($,{type:"datetime-local",value:t.startTime,onChange:s=>o({...t,startTime:s.target.value,endTime:t.endTime||""}),className:d.startTime?"border-red-500":""}),d.startTime&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.startTime})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),e.jsx($,{type:"datetime-local",value:t.endTime,onChange:s=>o({...t,endTime:s.target.value}),className:d.endTime?"border-red-500":""}),d.endTime&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.endTime})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),e.jsx("select",{className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:t.type,onChange:s=>o({...t,type:s.target.value}),children:K.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),e.jsx("select",{className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:t.status,onChange:s=>o({...t,status:s.target.value}),children:Q.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3,value:t.notes,onChange:s=>o({...t,notes:s.target.value}),placeholder:"Enter any additional notes..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(h,{variant:"outline",onClick:()=>{i(!1),D(null),A()},className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx(h,{variant:"primary",onClick:he,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Update Schedule"})]})]})}),e.jsx(ze,{isOpen:P,onClose:()=>I(!1),onConfirm:ue,staffName:E==null?void 0:E.staffName}),e.jsx(Ve,{isOpen:G,onClose:()=>{V(!1),D(null)},schedule:m,getTypeColor:Y,getStatusColor:Z})]})};export{cs as default};
