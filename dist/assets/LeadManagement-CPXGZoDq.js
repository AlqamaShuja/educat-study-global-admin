import{j as e,r as m,B as T}from"./index-D_0a8VZH.js";import{I as q}from"./Input-CvXmBRSW.js";import{u as R,a as Q}from"./officeStore-DmV9iHxf.js";import{M as W}from"./Modal-C-TYXrEH.js";import{U as M}from"./user-Col8Dc6N.js";import{M as X}from"./mail-NeauaYI_.js";import{P as ee}from"./phone-D-KHASr-.js";import{C as Y}from"./calendar-CFgP2NK7.js";import{F as se}from"./file-text-C1gJtZnp.js";import{B as Z}from"./building-pL6m0_IN.js";import{G as te}from"./graduation-cap-Do7Wuoca.js";import{C as V}from"./circle-alert-C7gzbhSX.js";import{C as ae}from"./circle-check-big-KsGiVaDX.js";import{U as J}from"./users-8DbqKR1r.js";import{S as ne}from"./search-WQZEDZzZ.js";import{F as re}from"./funnel-WOOAs9vc.js";import{E as ie}from"./eye-D1zuo86m.js";import{U as le}from"./user-check-dM6SSSkL.js";import"./userService-CYy00l9J.js";import"./officeService-CJb98nQG.js";import"./createLucideIcon-QavIXzvy.js";const ce=({isOpen:v,onClose:w,student:n,lead:r,offices:N,consultants:S})=>{var I,P;const{users:d}=R();if(!n||!r)return null;const C=s=>{var c;const t=N.find(o=>o.id===s);return t?`${t.name} - ${(c=t.address)==null?void 0:c.city}`:"No Office"},h=s=>{const t=S.find(c=>c.id===s);return t?t.name:"Unassigned"},A=s=>({new:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",converted:"bg-green-100 text-green-800",lost:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",p=s=>({walk_in:"bg-purple-100 text-purple-800",online:"bg-indigo-100 text-indigo-800",referral:"bg-orange-100 text-orange-800","Google OAuth":"bg-red-100 text-red-800","Facebook OAuth":"bg-blue-100 text-blue-800"})[s]||"bg-gray-100 text-gray-800",$=s=>{const t=[/Lead created by (manager|receptionist|consultant|super_admin) ([a-f0-9-]{36})/i,/Lead created by ([a-f0-9-]{36})/i];for(const c of t){const o=s.match(c);if(o){const b=o[2]||o[1],g=d.find(F=>F.id===b);return g?(o[1]&&o[1].length<10?o[1]:g.role,`Lead created by ${g==null?void 0:g.name} - ${g==null?void 0:g.email}`):s}}return s},u=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),L=s=>typeof s=="object"&&s!==null?s.total!==void 0?e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-bold text-blue-600",children:s.total}),e.jsxs("div",{className:"text-xs text-gray-500",children:["R:",s.reading," W:",s.writing," S:",s.speaking," L:",s.listening]})]}):JSON.stringify(s):s,y=(s,t)=>typeof t=="object"&&t!==null?s==="fullName"?`${t.firstName||""} ${t.lastName||""}`.trim():s==="permanentAddress"?`${t.street||""}, ${t.city||""}, ${t.provinceOfDomicile||""}`.replace(/^,\s*|,\s*$/g,""):s==="passportDetails"?`${t.passportNumber||""} (${t.passportCountry||""})`:s==="emergencyContact"?`${t.name||""} - ${t.relation||""} (${t.phone||""})`:JSON.stringify(t):s==="dateOfBirth"?u(t):t,O=s=>{if(typeof s=="object"&&s!==null){if(s.bachelorDegree){const t=s.bachelorDegree;return e.jsxs("div",{className:"bg-white p-3 rounded border text-sm",children:[e.jsx("div",{className:"font-medium",children:t.institution}),e.jsxs("div",{className:"text-gray-600",children:[t.programName," - ",t.specialization]}),e.jsxs("div",{className:"text-gray-500",children:[t.startDate," - ",t.endDate]}),e.jsxs("div",{className:"text-gray-500",children:["Country: ",t.country]}),t.cgpaPercentage&&e.jsxs("div",{className:"text-gray-500",children:["CGPA: ",t.cgpaPercentage]})]})}if(s.studyLevel)return e.jsxs("div",{className:"bg-white p-3 rounded border text-sm",children:[e.jsxs("div",{className:"font-medium",children:["Study Level: ",s.studyLevel]}),s.admissionYear&&e.jsxs("div",{className:"text-gray-600",children:["Admission Year: ",s.admissionYear]}),s.educationalGap&&e.jsxs("div",{className:"text-gray-500",children:["Gap: ",s.educationalGap]})]})}return Array.isArray(s)?s.map((t,c)=>e.jsxs("div",{className:"bg-white p-3 rounded border text-sm",children:[e.jsx("div",{className:"font-medium",children:t.institution}),e.jsxs("div",{className:"text-gray-600",children:[t.degree," - ",t.field]}),e.jsxs("div",{className:"text-gray-500",children:[t.startYear," - ",t.endYear]}),t.gpa&&e.jsxs("div",{className:"text-gray-500",children:["GPA: ",t.gpa]})]},c)):null};return e.jsx(W,{isOpen:v,onClose:w,title:"Student Details",size:"xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-blue-600"}),"Student Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Name:"}),e.jsx("span",{children:n.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Email:"}),e.jsx("span",{children:n.email})]}),n.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Phone:"}),e.jsx("span",{children:n.phone})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Joined:"}),e.jsx("span",{children:u(n.createdAt||new Date)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${n.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.isActive?"Active":"Inactive"})]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-blue-600"}),"Lead Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A(r.status)}`,children:(I=r.status)==null?void 0:I.replace("_"," ").replace(/\b\w/g,s=>s.toUpperCase())})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Source:"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p(r.source)}`,children:(P=r.source)==null?void 0:P.replace("_"," ")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Created:"}),e.jsx("span",{children:u(r.createdAt)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Office:"}),e.jsx("span",{children:C(r.officeId)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Consultant:"}),e.jsx("span",{children:h(r.assignedConsultant)})]}),r.languagePreference&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Language:"}),e.jsx("span",{className:"capitalize",children:r.languagePreference})]})]})]})]}),r.studyPreferences&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5 text-green-600"}),"Study Preferences"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[r.studyPreferences.destination&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Destination:"}),e.jsx("span",{className:"ml-2",children:r.studyPreferences.destination})]}),r.studyPreferences.level&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Level:"}),e.jsx("span",{className:"ml-2",children:r.studyPreferences.level})]}),r.studyPreferences.budget&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Budget:"}),e.jsx("span",{className:"ml-2",children:r.studyPreferences.budget})]})]}),e.jsxs("div",{className:"space-y-2",children:[r.studyPreferences.fields&&r.studyPreferences.fields.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Fields of Interest:"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:r.studyPreferences.fields.map((s,t)=>e.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:s},t))})]}),r.studyPreferences.startDate&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Preferred Start Date:"}),e.jsx("span",{className:"ml-2",children:r.studyPreferences.startDate})]})]})]})]}),n.profile&&e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-yellow-600"}),"Student Profile"]}),n.profile.personalInfo&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Personal Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:Object.entries(n.profile.personalInfo).map(([s,t])=>{if(!t||s==="email")return null;const c=s.replace(/([A-Z])/g," $1").replace(/^./,b=>b.toUpperCase()),o=y(s,t);return e.jsxs("div",{className:s==="permanentAddress"?"col-span-2":"",children:[e.jsxs("span",{className:"font-medium",children:[c,":"]}),e.jsx("span",{className:"ml-2",children:o})]},s)})})]}),n.profile.educationalBackground&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Educational Background"}),e.jsx("div",{className:"space-y-2",children:O(n.profile.educationalBackground)})]}),n.profile.testScores&&Object.keys(n.profile.testScores).length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Test Scores"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:Object.entries(n.profile.testScores).map(([s,t])=>!t||s==="partTimeWork"?null:e.jsxs("div",{className:"bg-white p-2 rounded border text-center",children:[e.jsx("div",{className:"font-medium uppercase",children:s.replace(/([A-Z])/g," $1")}),e.jsx("div",{className:"text-sm",children:L(t)})]},s))})]})]}),r.history&&r.history.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Lead History"}),e.jsx("div",{className:"space-y-2 overflow-y-auto",children:r.history.map((s,t)=>{const c=d.find(o=>o.id===s.userId);return e.jsx("div",{className:"bg-white p-3 rounded border text-sm",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.action?$(s.action):s.note}),s.details&&e.jsx("div",{className:"text-gray-600 mt-1",children:s.details}),s.dueDate&&e.jsxs("div",{className:"text-orange-600 mt-1 text-xs",children:["Due: ",u(s.dueDate)]}),s.userId&&e.jsxs("div",{className:"text-blue-600 mt-1 text-xs",children:["By:"," ",`${c==null?void 0:c.name} - ${c==null?void 0:c.email}`||"Unknown User"]})]}),e.jsx("div",{className:"text-xs text-gray-500 ml-2",children:u(s.timestamp)})]})},t)})})]})]})})},de=({isOpen:v,onClose:w,lead:n,offices:r,consultants:N,onAssignmentComplete:S})=>{var F,D,U;const[d,C]=m.useState(""),[h,A]=m.useState(""),[p,$]=m.useState(!1),[u,L]=m.useState(""),[y,O]=m.useState(""),[I,P]=m.useState([]),{updateLeadAssign:s}=R();m.useEffect(()=>{n&&(C(n.officeId||""),A(n.assignedConsultant||""),L(""),O(""))},[n,v]),m.useEffect(()=>{if(d){const i=N.filter(x=>{const f=x.consultantOffices.map(E=>E.id);return console.log(d,"vsaasnjcasjcsnsanca",f,"sacmkacacma",x.consultantOffices),f.includes(d)});console.log(i,"ascknkncjsansancsn",N),P(i),h&&(i.some(f=>f.id===h)||A(""))}else P(N)},[d,N]);const t=async()=>{$(!0),L(""),O("");try{const i={leadId:n.id,consultantId:h,officeId:d};await s(i),O("Lead assigned successfully!"),setTimeout(()=>{S(),w()},1500)}catch(i){L(i.message||"An error occurred while assigning the lead")}finally{$(!1)}},c=i=>{var f;const x=r.find(E=>E.id===i);return x?`${x.name} - ${(f=x.address)==null?void 0:f.city}`:"Unknown Office"},o=i=>{const x=N.find(f=>f.id===i);return x?x.name:"Unknown Consultant"},b=(n==null?void 0:n.assignedConsultant)||(n==null?void 0:n.officeId),g=d!==((n==null?void 0:n.officeId)||"")||h!==((n==null?void 0:n.assignedConsultant)||"");return n?e.jsx(W,{isOpen:v,onClose:w,title:"Assign Lead",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Current Assignment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Student"}),e.jsx("div",{className:"font-medium",children:(F=n.student)==null?void 0:F.name}),e.jsx("div",{className:"text-sm text-gray-500",children:(D=n.student)==null?void 0:D.email})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Lead Status"}),e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:(U=n.status)==null?void 0:U.replace("_"," ").replace(/\b\w/g,i=>i.toUpperCase())})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Current Office"}),e.jsx("div",{className:"font-medium",children:n.officeId?c(n.officeId):"Not Assigned"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Current Consultant"}),e.jsx("div",{className:"font-medium",children:n.assignedConsultant?o(n.assignedConsultant):"Not Assigned"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:b?"Reassign Lead":"Assign Lead"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Z,{className:"inline h-4 w-4 mr-1"}),"Select Office"]}),e.jsxs("select",{value:d,onChange:i=>C(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:p,children:[e.jsx("option",{value:"",children:"Select an office"}),r.map(i=>{var x;return e.jsxs("option",{value:i.id,children:[i.name," - ",(x=i.address)==null?void 0:x.city]},i.id)})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(M,{className:"inline h-4 w-4 mr-1"}),"Select Consultant"]}),e.jsxs("select",{value:h,onChange:i=>A(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:p||!d,children:[e.jsx("option",{value:"",children:d?"Select a consultant":"Please select an office first"}),I.map(i=>e.jsxs("option",{value:i.id,children:[i.name," (",i.email,")"]},i.id))]}),d&&I.length===0&&e.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"No consultants available in the selected office"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(V,{className:"h-5 w-5 text-blue-400 mr-2 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-700",children:[e.jsx("p",{className:"font-medium",children:"Assignment Rules:"}),e.jsxs("ul",{className:"mt-1 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Consultants can only be assigned if they belong to the selected office"}),e.jsx("li",{children:"Both office and consultant assignment are optional"}),e.jsx("li",{children:"You can assign to office only, consultant only, or both"})]})]})]})})]}),u&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),u]})}),y&&e.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),y]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(T,{variant:"outline",onClick:w,disabled:p,children:"Cancel"}),e.jsx(T,{onClick:t,disabled:p||!g||!d&&!h,className:"min-w-[120px]",children:p?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),b?"Reassigning...":"Assigning..."]}):b?"Reassign Lead":"Assign Lead"})]})]})}):null},$e=()=>{const{students:v,isLoading:w,error:n,fetchStudents:r,fetchConsultants:N,users:S}=R(),{offices:d,fetchOffices:C}=Q(),[h,A]=m.useState(""),[p,$]=m.useState(""),[u,L]=m.useState(""),[y,O]=m.useState(""),[I,P]=m.useState(null),[s,t]=m.useState(!1),[c,o]=m.useState(!1),[b,g]=m.useState(null);m.useEffect(()=>{r(),N(),C()},[r,N,C]),console.log(v,"asjcasjjscnascnsancsa");const D=(()=>{const a=[];return v.forEach(l=>{l.studentLeads&&l.studentLeads.length>0&&l.studentLeads.forEach(j=>{a.push({...j,student:{id:l.id,name:l.name,email:l.email,phone:l.phone,profile:l.profile}})})}),a})(),U=D.filter(a=>{var G,z,B;const l=((G=a.student.name)==null?void 0:G.toLowerCase().includes(h.toLowerCase()))||((z=a.student.email)==null?void 0:z.toLowerCase().includes(h.toLowerCase()))||((B=a.student.phone)==null?void 0:B.toLowerCase().includes(h.toLowerCase())),j=!p||a.status===p,k=!u||a.source===u,_=!y||a.officeId===y;return l&&j&&k&&_}),i=a=>({new:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",converted:"bg-green-100 text-green-800",lost:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800",x=a=>({walk_in:"bg-purple-100 text-purple-800",online:"bg-indigo-100 text-indigo-800",referral:"bg-orange-100 text-orange-800","Google OAuth":"bg-red-100 text-red-800","Facebook OAuth":"bg-blue-100 text-blue-800"})[a]||"bg-gray-100 text-gray-800",f=a=>{var j;const l=d.find(k=>k.id===a);return l?`${l.name} - ${(j=l.address)==null?void 0:j.city}`:"No Office"},E=a=>{const l=S.find(j=>j.id===a);return l?l.name:"Unassigned"},H=a=>{P(a.student),g(a),t(!0)},K=a=>{g(a),o(!0)};return w?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(J,{className:"h-7 w-7 text-blue-600"}),"Lead Management"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage student leads, assignments, and track conversion progress"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"bg-white rounded-lg border p-3",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Leads"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:D.length})]}),e.jsxs("div",{className:"bg-white rounded-lg border p-3",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Converted"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:D.filter(a=>a.status==="converted").length})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(q,{placeholder:"Search by name, email, or phone...",value:h,onChange:a=>A(a.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsxs("select",{value:p,onChange:a=>$(a.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none bg-white",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"converted",children:"Converted"}),e.jsx("option",{value:"lost",children:"Lost"})]})]}),e.jsx("div",{children:e.jsxs("select",{value:u,onChange:a=>L(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none bg-white",children:[e.jsx("option",{value:"",children:"All Sources"}),e.jsx("option",{value:"walk_in",children:"Walk In"}),e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"referral",children:"Referral"}),e.jsx("option",{value:"Google OAuth",children:"Google OAuth"}),e.jsx("option",{value:"Facebook OAuth",children:"Facebook OAuth"})]})}),e.jsx("div",{children:e.jsxs("select",{value:y,onChange:a=>O(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none bg-white",children:[e.jsx("option",{value:"",children:"All Offices"}),d.map(a=>{var l;return e.jsxs("option",{value:a.id,children:[a.name," - ",(l=a.address)==null?void 0:l.city]},a.id)})]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Student Leads (",U.length,")"]})}),U.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(J,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No leads found"}),e.jsx("p",{className:"text-gray-600",children:h||p||u||y?"Try adjusting your search criteria":"No student leads available"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Consultant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Office"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Study Preferences"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:U.map(a=>{var l,j,k,_;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.student.name}),e.jsx("div",{className:"text-sm text-gray-500",children:a.student.email}),a.student.phone&&e.jsx("div",{className:"text-sm text-gray-500",children:a.student.phone})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${i(a.status)}`,children:(l=a.status)==null?void 0:l.replace("_"," ").replace(/\b\w/g,G=>G.toUpperCase())})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x(a.source)}`,children:(j=a.source)==null?void 0:j.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E(a.assignedConsultant)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f(a.officeId)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Destination:"})," ",((k=a.studyPreferences)==null?void 0:k.destination)||"N/A"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Level:"})," ",((_=a.studyPreferences)==null?void 0:_.level)||"N/A"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>H(a),className:"flex items-center gap-1",children:[e.jsx(ie,{className:"h-3 w-3"}),"View"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>K(a),className:"flex items-center gap-1",children:[e.jsx(le,{className:"h-3 w-3"}),"Assign"]})]})]},a.id)})})]})})]}),e.jsx(ce,{isOpen:s,onClose:()=>t(!1),student:I,lead:b,offices:d,consultants:S.filter(a=>a.role==="consultant")}),e.jsx(de,{isOpen:c,onClose:()=>o(!1),lead:b,offices:d,consultants:S.filter(a=>a.role==="consultant"),onAssignmentComplete:()=>{o(!1),r()}})]})};export{$e as default};
