import{r as m,j as e,B as g,L as N,y as f}from"./index-B8d-T4_g.js";import{X as v}from"./x-B8Viopl1.js";const E=({isOpen:b,onClose:c,consultant:r,onSubmit:j,role:s="consultant"})=>{const[t,h]=m.useState({role:s,name:"",email:"",phone:"",password:"",id:""}),[a,x]=m.useState({}),[p,u]=m.useState(!1);m.useEffect(()=>{h(r?{role:s,name:r.name||"",email:r.email||"",phone:r.phone||"",password:"",id:r.id||""}:{role:s,name:"",email:"",phone:"",password:"",id:""})},[r,s]);const w=()=>{const i={};return t.name.trim()||(i.name="Name is required"),t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(i.email="Invalid email format"):i.email="Email is required",t.phone.trim()||(i.phone="Phone is required"),!t.id&&!t.password.trim()&&(i.password="Password is required"),x(i),Object.keys(i).length===0},o=i=>{const{name:d,value:l}=i.target;h(n=>({...n,[d]:l})),x(n=>({...n,[d]:""}))},y=async i=>{var d,l;if(i.preventDefault(),!!w()){u(!0);try{await j(t),f.success(r?`${s.charAt(0).toUpperCase()+s.slice(1)} updated successfully`:`${s.charAt(0).toUpperCase()+s.slice(1)} created successfully`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}),c()}catch(n){f.error(((l=(d=n.response)==null?void 0:d.data)==null?void 0:l.message)||`Failed to save ${s}`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"})}finally{u(!1)}}};return b?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:r?`Edit ${s.charAt(0).toUpperCase()+s.slice(1)}`:`Add ${s.charAt(0).toUpperCase()+s.slice(1)}`}),e.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-700 transition-colors duration-200",children:e.jsx(v,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:o,className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm ${a.name?"border-red-500":""}`,placeholder:"Enter name"}),a.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:o,className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm ${a.email?"border-red-500":""}`,placeholder:"Enter email"}),a.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("input",{type:"text",name:"phone",value:t.phone,onChange:o,className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm ${a.phone?"border-red-500":""}`,placeholder:"Enter phone"}),a.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:t.password,onChange:o,className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm ${a.password?"border-red-500":""}`,placeholder:r?"Leave blank to keep unchanged":"Enter password"}),a.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.password})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(g,{variant:"outline",onClick:c,disabled:p,className:"border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),e.jsx(g,{type:"submit",variant:"primary",disabled:p,className:"bg-indigo-600 hover:bg-indigo-700 text-white transition-colors duration-200",children:p?e.jsxs("span",{className:"flex items-center",children:[e.jsx(N,{size:"sm",className:"mr-2 text-white"}),r?"Updating...":"Creating..."]}):r?"Update":"Create"})]})]})]})}):null};export{E as A};
