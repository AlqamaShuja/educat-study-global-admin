import{u as j,r as h,y as N,j as e,L as w,B as l}from"./index-D_0a8VZH.js";import{u as v}from"./useManagerStore-BXFzQXT2.js";import{C as a}from"./Card-BZSd9g6-.js";import{B as b}from"./Badge-DnoA-fpa.js";/* empty css                      */import{U as y}from"./users-8DbqKR1r.js";import{F as n}from"./file-text-C1gJtZnp.js";import{C as g}from"./circle-check-big-KsGiVaDX.js";import{C}from"./clock-CRKKHv1b.js";import{E as k}from"./eye-D1zuo86m.js";import"./toDate-BKXxHYqX.js";import"./createLucideIcon-QavIXzvy.js";const O=()=>{const i=j(),{dashboard:s,leads:o,fetchDashboard:d,fetchLeads:c,loading:p,error:r}=v();return h.useEffect(()=>{console.log("Fetching dashboard and leads..."),d(),c()},[d,c]),h.useEffect(()=>{r&&(console.error("Dashboard error:",r),N.error(r,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}))},[r]),p?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(w,{size:"lg",className:"text-indigo-600"})}):e.jsxs("div",{className:"p-6 space-y-8 bg-gradient-to-br from-gray-50 to-indigo-50 min-h-screen",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Manager Dashboard"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Monitor office performance and manage leads at a glance"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(l,{variant:"outline",onClick:()=>i("/manager/performance"),className:"border-blue-300 text-blue-500 hover:bg-indigo-50 transition-colors duration-200",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Consultants"]}),e.jsxs(l,{variant:"primary",onClick:()=>i("/manager/leads"),className:"bg-blue-600 hover:bg-blue-800 text-white transition-colors duration-200",children:[e.jsx(n,{className:"h-4 w-4 mr-2"}),"Manage Leads"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(a,{className:"relative overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 animate-fade-in bg-white",title:"Total Leads",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-blue-500"}),e.jsxs("div",{className:"flex items-center p-4",children:[e.jsx(n,{className:"h-10 w-10 text-blue-500 mr-4 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:(s==null?void 0:s.totalLeads)||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"All leads in pipeline"})]})]})]}),e.jsxs(a,{className:"relative overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 animate-fade-in bg-white",title:"Converted Leads",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-green-500"}),e.jsxs("div",{className:"flex items-center p-4",children:[e.jsx(g,{className:"h-10 w-10 text-green-500 mr-4 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:(s==null?void 0:s.convertedLeads)||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"Successful conversions"})]})]})]}),e.jsxs(a,{className:"relative overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 animate-fade-in bg-white",title:"Conversion Rate",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-indigo-500"}),e.jsxs("div",{className:"flex items-center p-4",children:[e.jsx(g,{className:"h-10 w-10 text-indigo-500 mr-4 flex-shrink-0"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[(((s==null?void 0:s.conversionRate)||0)*100).toFixed(2),"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Lead success rate"})]})]})]}),e.jsxs(a,{className:"relative overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 animate-fade-in bg-white",title:"Pending Appointments",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-yellow-500"}),e.jsxs("div",{className:"flex items-center p-4",children:[e.jsx(C,{className:"h-10 w-10 text-yellow-500 mr-4 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:(s==null?void 0:s.pendingAppointments)||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"Upcoming meetings"})]})]})]})]}),e.jsx(a,{className:"shadow-md hover:shadow-lg transition-shadow duration-300 animate-fade-in bg-white",title:"Recent Leads",children:o.length?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.slice(0,5).map((t,u)=>{var x,m;return e.jsxs("tr",{className:`hover:bg-indigo-50 transition-colors duration-200 ${u%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:((x=t.student)==null?void 0:x.name)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((m=t.student)==null?void 0:m.email)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(b,{className:`${t.status==="converted"?"bg-green-100 text-green-800":t.status==="in_progress"?"bg-blue-100 text-blue-800":t.status==="lost"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"} px-2 py-1 text-xs font-medium rounded-full`,children:t.status?t.status.replace(/_/g," ").replace(/\b\w/g,f=>f.toUpperCase()):"New"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs(l,{size:"sm",variant:"outline",onClick:()=>i(`/manager/students/${t.studentId}`),className:"border-indigo-300 text-blue-600 hover:bg-indigo-50 transition-colors duration-200",children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"View"]})})]},t.id)})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(n,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No leads available"})]})})]})};export{O as default};
