import{r as s,y as d,j as e,L as B,B as a}from"./index-B8d-T4_g.js";import{u as T,m as v}from"./useManagerStore-BTCKwtdl.js";import{C as U}from"./Card-BmdFGXxf.js";import{A as C}from"./AddOrEditConsultantModal--8p1qQih.js";import{U as k}from"./user-plus-BMYwww18.js";import{U as F}from"./users-B4t-nxO4.js";import{S as H}from"./square-pen-BaSEyL2h.js";import{T as L}from"./trash-2-CIGIiON9.js";import{X as q}from"./x-B8Viopl1.js";import"./toDate-BKXxHYqX.js";import"./createLucideIcon-Sm81qEul.js";const ee=()=>{const{fetchOfficeReceptionist:l,receptionists:r,setReceptionists:m,consultants:f,loading:S,error:x}=T(),[M,h]=s.useState(!1),[R,y]=s.useState(!1),[A,u]=s.useState(!1),[O,j]=s.useState(null),[o,b]=s.useState(null),[n,N]=s.useState(1),p=10;s.useEffect(()=>{l()},[]),s.useEffect(()=>{x&&d.error(x,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"})},[x]);const w=async t=>{console.log(t,"acakscnasncasjncs:1");try{const i=await v.createStaffMember({...t,role:"receptionist"});console.log(i,"acakscnasncasjncs:2"),await l()}catch{d.error("Failed to add or update Receptionist")}},P=async()=>{var t,i;try{await v.disconnectStaffMember(o.id);const g=r.filter(z=>z.id!==o.id);m(g),u(!1),b(null),d.success("Receptionist deleted successfully",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"})}catch(g){d.error(((i=(t=g.response)==null?void 0:t.data)==null?void 0:i.message)||"Failed to delete receptionist",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"})}},E=t=>{b(t),u(!0)},c=Math.ceil(r.length/p),D=r.slice((n-1)*p,n*p);return S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(B,{size:"lg",className:"text-blue-600"})}):e.jsxs("div",{className:"p-6 space-y-8 bg-gradient-to-br from-gray-50 to-indigo-50 min-h-screen",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Receptionist Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your office receptionists"})]}),e.jsxs(a,{variant:"primary",onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 text-white transition-colors duration-200",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Add Receptionist"]})]}),e.jsxs(U,{className:"shadow-md hover:shadow-lg transition-shadow duration-300 animate-fade-in bg-white",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 px-6 pt-4",children:"Receptionists"}),r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(F,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No receptionists found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Add your first receptionist to get started."}),e.jsxs(a,{variant:"primary",onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 text-white transition-colors duration-200",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Add First Receptionist"]})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map((t,i)=>e.jsxs("tr",{className:`hover:bg-indigo-50 transition-colors duration-200 ${i%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.email||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.phone||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>{j(t),y(!0)},className:"border-blue-300 text-blue-600 hover:bg-blue-50 transition-colors duration-200",children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>E(t),className:"border-red-300 text-red-600 hover:bg-red-50 transition-colors duration-200",children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]},t.id))})]}),c>1&&e.jsxs("div",{className:"mt-4 flex justify-between items-center px-6 pb-4",children:[e.jsx(a,{variant:"outline",onClick:()=>N(t=>Math.max(t-1,1)),disabled:n===1,className:"border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",n," of ",c]}),e.jsx(a,{variant:"outline",onClick:()=>N(t=>Math.min(t+1,c)),disabled:n===c,className:"border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:"Next"})]})]})]}),e.jsx(C,{isOpen:M,onClose:()=>h(!1),onSubmit:w,role:"receptionist"}),e.jsx(C,{isOpen:R,onClose:()=>{y(!1),j(null)},consultant:O,onSubmit:w,role:"receptionist"}),e.jsx(X,{isOpen:A,onClose:()=>u(!1),onConfirm:P,receptionistName:o==null?void 0:o.name})]})},X=({isOpen:l,onClose:r,onConfirm:m,receptionistName:f})=>l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Confirm Deletion"}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 transition-colors duration-200",children:e.jsx(q,{className:"h-5 w-5"})})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Are you sure you want to delete the receptionist"," ",e.jsx("span",{className:"font-medium text-gray-900",children:f||"this user"}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(a,{variant:"outline",onClick:r,className:"border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),e.jsx(a,{variant:"primary",onClick:m,className:"bg-red-600 hover:bg-red-700 text-white transition-colors duration-200",children:"Delete"})]})]})}):null;export{ee as default};
