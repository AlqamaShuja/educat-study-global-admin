import{r as m,j as e,L as w,B as k}from"./index-8BfwU0ug.js";import{u as T}from"./useApi-CYPgFTKK.js";import{u as C}from"./useAuth-DcN1mZj1.js";import{u as A,T as F}from"./Toast-BgXBk8cG.js";import{C as r}from"./Card-D8yAsbgn.js";import{I as i}from"./Input-1qecWYJp.js";import{S as c}from"./Select-0k3J7if3.js";import{S as d}from"./Switch-EeiO4E9y.js";import{S as L}from"./shield-BJLPrUaL.js";import{S as E}from"./save-DuIrD8L3.js";import{S as R}from"./settings-yb312bCi.js";import{M}from"./mail-14nxtcVU.js";import{L as z}from"./lock-BnCt3TmR.js";import{D as q}from"./database-DyOiDN5D.js";import"./userService-BNNDWOI3.js";import"./leadService-Cew0x-1D.js";import"./officeService-YCa5sj2e.js";import"./universityService-B9Qwd0nV.js";import"./courseService-IKGP0jCT.js";import"./messageService-CyNia2sF.js";import"./reportService-B_mrla-p.js";import"./createLucideIcon-DXfLnrkV.js";const le=()=>{const{user:u}=C(),{callApi:h,loading:g,error:x}=T(),{hasPermission:n}=A(),[a,p]=m.useState({siteName:"",siteUrl:"",emailFrom:"",emailReplyTo:"",defaultTimezone:"",maintenanceMode:!1,allowRegistrations:!0,sessionTimeout:30,backupFrequency:"daily",defaultLanguage:"en",twoFactorAuth:!1}),[o,l]=m.useState({show:!1,message:"",type:"success"}),f=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"America/New_York"},{value:"Europe/London",label:"Europe/London"},{value:"Asia/Tokyo",label:"Asia/Tokyo"},{value:"Australia/Sydney",label:"Australia/Sydney"}],b=[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"}],v=[{value:"hourly",label:"Hourly"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}];m.useEffect(()=>{u&&n("view","settings")&&j()},[u]);const j=async()=>{try{const s=await h("GET","/super-admin/settings");p(s||a)}catch{l({show:!0,message:x||"Failed to fetch settings",type:"error"})}},y=async()=>{if(!n("edit","settings")){l({show:!0,message:"You do not have permission to edit settings",type:"error"});return}try{await h("PATCH","/super-admin/settings",a),l({show:!0,message:"Settings saved successfully",type:"success"}),await j()}catch{l({show:!0,message:x||"Failed to save settings",type:"error"})}},t=(s,N)=>{p(S=>({...S,[s]:N}))};return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(w,{size:"lg"})}):n("view","settings")?e.jsxs("div",{className:"space-y-6",children:[e.jsx(F,{isOpen:o.show,message:o.message,type:o.type,onClose:()=>l({...o,show:!1})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"System Settings"}),e.jsx("p",{className:"text-gray-600",children:"Configure system-wide settings and preferences."})]}),e.jsxs(k,{onClick:y,disabled:g||!n("edit","settings"),children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]}),e.jsxs(r,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(R,{className:"h-5 w-5 mr-2"}),"General Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Site Name"}),e.jsx(i,{value:a.siteName,onChange:s=>t("siteName",s.target.value),placeholder:"Your Site Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Site URL"}),e.jsx(i,{value:a.siteUrl,onChange:s=>t("siteUrl",s.target.value),placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Default Timezone"}),e.jsx(c,{options:f,value:a.defaultTimezone,onChange:s=>t("defaultTimezone",s),placeholder:"Select Timezone"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Default Language"}),e.jsx(c,{options:b,value:a.defaultLanguage,onChange:s=>t("defaultLanguage",s),placeholder:"Select Language"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[e.jsx(d,{checked:a.maintenanceMode,onChange:s=>t("maintenanceMode",s),label:"Maintenance Mode"}),e.jsx(d,{checked:a.allowRegistrations,onChange:s=>t("allowRegistrations",s),label:"Allow New Registrations"})]})]}),e.jsxs(r,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(M,{className:"h-5 w-5 mr-2"}),"Email Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"From Email Address"}),e.jsx(i,{value:a.emailFrom,onChange:s=>t("emailFrom",s.target.value),placeholder:"no-reply@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reply-To Email Address"}),e.jsx(i,{value:a.emailReplyTo,onChange:s=>t("emailReplyTo",s.target.value),placeholder:"support@example.com"})]})]})]}),e.jsxs(r,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(z,{className:"h-5 w-5 mr-2"}),"Security Settings"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Session Timeout (minutes)"}),e.jsx(i,{type:"number",value:a.sessionTimeout,onChange:s=>t("sessionTimeout",parseInt(s.target.value)),placeholder:"30",min:"5",max:"1440"})]})}),e.jsx("div",{className:"mt-6",children:e.jsx(d,{checked:a.twoFactorAuth,onChange:s=>t("twoFactorAuth",s),label:"Enable Two-Factor Authentication"})})]}),e.jsxs(r,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(q,{className:"h-5 w-5 mr-2"}),"Backup Settings"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Backup Frequency"}),e.jsx(c,{options:v,value:a.backupFrequency,onChange:s=>t("backupFrequency",s),placeholder:"Select Frequency"})]})})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(L,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"You do not have permission to view system settings."})]})};export{le as default};
