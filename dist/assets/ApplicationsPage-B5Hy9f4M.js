import{u as de,r as c,j as e,B as d}from"./index-D_0a8VZH.js";import{u as me,S as f,a as j,A as ue,b as xe}from"./ApplicationsTable-DPt9mRMH.js";import{I as he}from"./Input-CvXmBRSW.js";import{S as X}from"./Select-DcciDOjL.js";import{C as n}from"./Card-BZSd9g6-.js";import{D as pe}from"./database-DqGqJxrv.js";import{F as Y}from"./file-text-C1gJtZnp.js";import{C as be}from"./clock-CRKKHv1b.js";import{T as ge}from"./trending-up-Cw_lE7nU.js";import{A as fe}from"./award-v-MKA7uy.js";import{C as je}from"./circle-check-big-KsGiVaDX.js";import{T as ve}from"./target-Bd_0vASp.js";import{R as Ne}from"./refresh-cw-DgskF8DJ.js";import{C as we}from"./chart-column-B7YZdtT0.js";import{R as Z,C as ee,T as se,L as ae}from"./generateCategoricalChart-Cu8j_dfd.js";import{P as te,a as le}from"./PieChart-DQekIQCu.js";import{A as ye}from"./activity-CtQViRj6.js";import{F as Ce}from"./funnel-WOOAs9vc.js";import{S as Se}from"./search-WQZEDZzZ.js";import{T as Ae}from"./triangle-alert-ByNhgfIn.js";import{P as Fe}from"./plus-DFJI7CJl.js";import"./Modal-C-TYXrEH.js";import"./Badge-DnoA-fpa.js";import"./calendar-CFgP2NK7.js";import"./createLucideIcon-QavIXzvy.js";import"./format-CW8_DxCc.js";import"./toDate-BKXxHYqX.js";import"./building-pL6m0_IN.js";import"./user-Col8Dc6N.js";import"./mail-NeauaYI_.js";import"./users-8DbqKR1r.js";import"./globe-DqWFKqX7.js";import"./circle-x-DnT5izIu.js";import"./eye-D1zuo86m.js";import"./square-pen-DP2r3-IP.js";import"./trash-2-D-1SKTu4.js";import"./ellipsis-E4DXFL4X.js";import"./findIndex-BhjBv0ZI.js";import"./index-BwWA86vI.js";const hs=()=>{var D,R,$,B,I,E,O,P,M,_,z,K,U,V;const re=de(),{applications:v,statistics:a,loading:m,error:N,filters:l,fetchAllApplications:h,fetchStatistics:p,setFilters:w}=me(),[o,y]=c.useState(""),[b,oe]=c.useState(!1),[ie,ke]=c.useState(!0),[C,S]=c.useState(null),[A,F]=c.useState(!1);c.useEffect(()=>{h(),p()},[h,p]);const ne=s=>{S(s),F(!0)},k=(s,t)=>{w({[s]:t})},g=()=>{w({status:"",stage:""}),y("")},u=v.filter(s=>{var G,q,H,J,Q,W;const t=o===""||((q=(G=s.student)==null?void 0:G.name)==null?void 0:q.toLowerCase().includes(o.toLowerCase()))||((J=(H=s.student)==null?void 0:H.email)==null?void 0:J.toLowerCase().includes(o.toLowerCase()))||((W=(Q=s.consultant)==null?void 0:Q.name)==null?void 0:W.toLowerCase().includes(o.toLowerCase()))||s.id.toLowerCase().includes(o.toLowerCase()),i=!l.status||s.status===l.status,r=!l.stage||s.stage===l.stage;return t&&i&&r}),ce=[{label:"Total",count:(a==null?void 0:a.total)||v.length,color:"from-slate-50 to-gray-100",textColor:"text-gray-700",icon:pe,iconColor:"text-gray-500"},{label:"Draft",count:((R=(D=a==null?void 0:a.byStatus)==null?void 0:D.find(s=>s.status==="draft"))==null?void 0:R.count)||0,color:"from-gray-50 to-slate-100",textColor:"text-gray-700",icon:Y,iconColor:"text-gray-500"},{label:"In Review",count:((B=($=a==null?void 0:a.byStatus)==null?void 0:$.find(s=>s.status==="in_review"))==null?void 0:B.count)||0,color:"from-blue-50 to-blue-100",textColor:"text-blue-700",icon:be,iconColor:"text-blue-500"},{label:"Submitted",count:((E=(I=a==null?void 0:a.byStatus)==null?void 0:I.find(s=>s.status==="submitted"))==null?void 0:E.count)||0,color:"from-amber-50 to-yellow-100",textColor:"text-amber-700",icon:ge,iconColor:"text-amber-500"},{label:"Offers",count:((P=(O=a==null?void 0:a.byStatus)==null?void 0:O.find(s=>s.status==="offers_received"))==null?void 0:P.count)||0,color:"from-purple-50 to-purple-100",textColor:"text-purple-700",icon:fe,iconColor:"text-purple-500"},{label:"Accepted",count:((_=(M=a==null?void 0:a.byStatus)==null?void 0:M.find(s=>s.status==="accepted"))==null?void 0:_.count)||0,color:"from-green-50 to-emerald-100",textColor:"text-green-700",icon:je,iconColor:"text-green-500"},{label:"Completed",count:((K=(z=a==null?void 0:a.byStatus)==null?void 0:z.find(s=>s.status==="completed"))==null?void 0:K.count)||0,color:"from-teal-50 to-cyan-100",textColor:"text-teal-700",icon:ve,iconColor:"text-teal-500"}],T=((U=a==null?void 0:a.byStatus)==null?void 0:U.map(s=>{var t,i;return{name:((t=f.find(r=>r.value===s.status))==null?void 0:t.label)||s.status,value:parseInt(s.count)||0,color:((i=f.find(r=>r.value===s.status))==null?void 0:i.color)||"#6B7280"}}))||[],L=((V=a==null?void 0:a.byStage)==null?void 0:V.map(s=>{var t,i;return{name:((t=j.find(r=>r.value===s.stage))==null?void 0:t.label)||s.stage,value:parseInt(s.count)||0,color:((i=j.find(r=>r.value===s.stage))==null?void 0:i.color)||"#6B7280"}}))||[],x=["#3B82F6","#8B5CF6","#10B981","#F59E0B","#EF4444","#6366F1","#14B8A6"];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-purple-600/10 rounded-2xl"}),e.jsx("div",{className:"relative bg-white/80 backdrop-blur-sm rounded-2xl border border-white/50 shadow-lg p-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Application Management"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Monitor and manage all student applications across the system"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(d,{variant:"outline",onClick:()=>{h(),p()},disabled:m,className:"border-gray-200 text-gray-600 hover:bg-gray-50 transition-all duration-200",children:[e.jsx(Ne,{className:`h-4 w-4 mr-2 ${m?"animate-spin":""}`}),"Refresh"]})})]})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:ce.map(s=>{const t=s.icon;return e.jsx(n,{className:"group hover:shadow-lg transition-all duration-300 border-0 overflow-hidden",children:e.jsxs("div",{className:`h-full bg-gradient-to-br ${s.color} p-4 relative`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-white/10 rounded-full -mr-6 -mt-6"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("div",{className:`p-2 rounded-lg bg-white/50 ${s.iconColor} group-hover:scale-110 transition-transform duration-200`,children:e.jsx(t,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:s.label}),e.jsx("p",{className:`text-2xl font-bold ${s.textColor}`,children:s.count})]})]})]})},s.label)})}),ie&&a&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(n,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50/50 to-indigo-50/50 p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(we,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Status Distribution"}),e.jsx("p",{className:"text-gray-600",children:"Application status breakdown"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"h-80",children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(te,{children:[e.jsx(le,{data:T,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:t})=>`${s} ${(t*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:T.map((s,t)=>e.jsx(ee,{fill:x[t%x.length]},`cell-${t}`))}),e.jsx(se,{}),e.jsx(ae,{})]})})})})]}),e.jsxs(n,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50/50 to-pink-50/50 p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx(ye,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Stage Distribution"}),e.jsx("p",{className:"text-gray-600",children:"Application stage breakdown"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"h-80",children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(te,{children:[e.jsx(le,{data:L,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:t})=>`${s} ${(t*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:L.map((s,t)=>e.jsx(ee,{fill:x[t%x.length]},`cell-${t}`))}),e.jsx(se,{}),e.jsx(ae,{})]})})})})]})]}),e.jsx(n,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm overflow-hidden",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50/50 to-purple-50/50 p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Apply Filters on Applications"}),e.jsxs("p",{className:"text-gray-600",children:[u.length," application",u.length!==1?"s":""," found"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>oe(!b),className:`transition-all duration-200 ${b?"bg-blue-100 border-blue-300 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Advanced Filters"]}),e.jsx(d,{variant:"outline",size:"sm",onClick:g,className:"border-purple-300 text-purple-700 hover:bg-purple-50 transition-all duration-200",children:"Clear All"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative group",children:[e.jsx(Se,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 group-focus-within:text-blue-500 transition-colors"}),e.jsx(he,{placeholder:"Search applications by student name, consultant name, email, or ID...",value:o,onChange:s=>y(s.target.value),className:"pl-12 py-4 text-lg border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/70 backdrop-blur-sm shadow-lg"})]})}),b&&e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl border border-white/50 p-6 shadow-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Status Filter"}),e.jsxs(X,{value:l.status,onChange:s=>k("status",s.target.value),className:"w-full rounded-lg border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white shadow-sm",children:[e.jsx("option",{value:"",children:"All Statuses"}),f.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Stage Filter"}),e.jsxs(X,{value:l.stage,onChange:s=>k("stage",s.target.value),className:"w-full rounded-lg border-gray-200 focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white shadow-sm",children:[e.jsx("option",{value:"",children:"All Stages"}),j.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(d,{variant:"outline",onClick:g,className:"w-full py-3 border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg transition-all duration-200",children:"Reset Filters"})})]})})]})}),e.jsx(n,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm overflow-hidden",children:e.jsx(ue,{applications:u,loading:m,onView:ne,showConsultant:!0,showActions:!0,showEdit:!1,showDelete:!1})}),N&&e.jsx(n,{className:"border-0 shadow-xl overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-400",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full mr-4",children:e.jsx(Ae,{className:"h-6 w-6 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-red-800 mb-1",children:"System Error"}),e.jsx("p",{className:"text-red-700",children:N})]})]})})})}),!m&&u.length===0&&e.jsx(n,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm overflow-hidden",children:e.jsxs("div",{className:"text-center py-16 px-8",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(Y,{className:"h-12 w-12 text-blue-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No applications found"}),e.jsx("p",{className:"text-gray-600 mb-8 text-lg max-w-md mx-auto",children:o||l.status||l.stage?"No applications match your current search criteria. Try adjusting your filters.":"There are no applications in the system yet. Start by creating your first application."}),o||l.status||l.stage?e.jsx(d,{variant:"outline",onClick:g,className:"border-blue-300 text-blue-700 hover:bg-blue-50 px-8 py-3 rounded-xl transition-all duration-200",children:"Clear All Filters"}):e.jsxs(d,{onClick:()=>re("/super-admin/applications/new"),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl px-8 py-3 rounded-xl transition-all duration-200",children:[e.jsx(Fe,{className:"h-5 w-5 mr-2"}),"Create First Application"]})]})}),A&&C&&e.jsx(xe,{application:C,isOpen:A,onClose:()=>{F(!1),S(null)}})]})})};export{hs as default};
