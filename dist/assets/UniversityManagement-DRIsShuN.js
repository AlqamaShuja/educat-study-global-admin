import{r as g,j as e,B as y,u as z}from"./index-8BfwU0ug.js";import{I as m}from"./Input-1qecWYJp.js";import{M as G}from"./Modal-BwhwgVqM.js";import{u as $}from"./index.esm-QdGXpUM4.js";import{S as E}from"./Select-0k3J7if3.js";import{u as V}from"./universityStore-Bef-C0_F.js";import{G as _}from"./graduation-cap-CQlrmxuC.js";import{P as K}from"./plus-x9Vd6qoA.js";import{S as W}from"./search-BAtyx4tz.js";import{F as Q}from"./funnel-o2b3UmUJ.js";import{G as Z}from"./globe-stMFUg1s.js";import{M as H}from"./map-pin-D_rU419Z.js";import{c as J}from"./createLucideIcon-DXfLnrkV.js";import{B as X}from"./building-D8cbomhE.js";import{E as ee}from"./eye-DGH7ITOI.js";import{P as ae}from"./pen-B2u6gTJ3.js";import{T as te}from"./trash-2-DUEwUcLl.js";import"./universityService-B9Qwd0nV.js";/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],le=J("percent",se),Y=[{value:"USA",label:"United States"},{value:"UK",label:"United Kingdom"},{value:"Canada",label:"Canada"},{value:"Australia",label:"Australia"},{value:"Germany",label:"Germany"},{value:"Netherlands",label:"Netherlands"},{value:"Sweden",label:"Sweden"},{value:"France",label:"France"},{value:"Switzerland",label:"Switzerland"},{value:"New Zealand",label:"New Zealand"},{value:"Ireland",label:"Ireland"},{value:"Norway",label:"Norway"},{value:"Denmark",label:"Denmark"},{value:"Pakistan",label:"Pakistan"}],re=({university:s=null,onSubmit:v,onCancel:q,loading:p=!1,mode:x="create"})=>{var b,U,F,f;console.log(s,"ascancjsancnuniversity");const[n,w]=g.useState((s==null?void 0:s.details)||{establishedYear:"",studentPopulation:"",internationalStudents:"",campuses:"",ranking:"",accreditation:"",programs:[],facilities:[],admissionRequirements:"",applicationDeadlines:"",scholarships:"",hostelFacilities:!1,sportsFacilities:!1,library:!1,researchFacilities:!1}),{register:o,handleSubmit:L,formState:{errors:d},setValue:N,watch:h,reset:S}=$({defaultValues:{name:(s==null?void 0:s.name)||"",country:(s==null?void 0:s.country)||"",city:(s==null?void 0:s.city)||"",website:(s==null?void 0:s.website)||"",mouStatus:(s==null?void 0:s.mouStatus)||"none",percentageAgreed:(s==null?void 0:s.percentageAgreed)||""}}),r=a=>{switch(a){case"none":return"10";case"direct":return"10";case"third_party":return"5";default:return""}};g.useEffect(()=>{s&&x==="edit"&&(S({name:s.name||"",country:s.country||"",city:s.city||"",website:s.website||"",mouStatus:s.mouStatus||"none",percentageAgreed:s.percentageAgreed||""}),w(s.details||{establishedYear:"",studentPopulation:"",internationalStudents:"",campuses:"",ranking:"",accreditation:"",programs:[],facilities:[],admissionRequirements:"",applicationDeadlines:"",scholarships:"",hostelFacilities:!1,sportsFacilities:!1,library:!1,researchFacilities:!1}))},[s,x,S]);const O=a=>{const l=a.value;N("mouStatus",l);const u=h("percentageAgreed"),T=["10","5",""].includes(u);if(!u||T){const M=r(l);N("percentageAgreed",M)}},C=[{value:"none",label:"No MOU"},{value:"direct",label:"Direct Partnership"},{value:"third_party",label:"Third Party Partnership"}],P=[{value:"undergraduate",label:"Undergraduate Programs"},{value:"postgraduate",label:"Postgraduate Programs"},{value:"phd",label:"PhD Programs"},{value:"diploma",label:"Diploma Programs"},{value:"certificate",label:"Certificate Programs"},{value:"exchange",label:"Exchange Programs"},{value:"research",label:"Research Programs"}],k=[{value:"library",label:"Library"},{value:"labs",label:"Research Labs"},{value:"sports",label:"Sports Complex"},{value:"hostel",label:"Student Accommodation"},{value:"medical",label:"Medical Center"},{value:"cafeteria",label:"Dining Facilities"},{value:"transport",label:"Transportation"},{value:"wifi",label:"Campus WiFi"},{value:"career",label:"Career Services"},{value:"counseling",label:"Student Counseling"}],i=(a,l)=>{w(u=>({...u,[a]:l}))},A=a=>{const l={name:a.name,country:a.country,city:a.city,website:a.website,mouStatus:a.mouStatus,percentageAgreed:a.percentageAgreed,details:n};v(l)};return e.jsxs("form",{onSubmit:L(A),className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(m,{label:"University Name",...o("name",{required:"University name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),error:(b=d.name)==null?void 0:b.message,placeholder:"Enter university name",required:!0})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Country ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(E,{options:Y,value:Y.find(a=>a.value===h("country")),onChange:a=>N("country",(a==null?void 0:a.value)||""),placeholder:"Select country",searchable:!0}),d.country&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:d.country.message}),e.jsx("input",{type:"hidden",...o("country",{required:"Country is required"})})]}),e.jsx(m,{label:"City",...o("city"),error:(U=d.city)==null?void 0:U.message,placeholder:"Enter city name"}),e.jsx(m,{label:"Website URL",type:"url",...o("website",{pattern:{value:/^https?:\/\/.+\..+/,message:"Please enter a valid URL"}}),error:(F=d.website)==null?void 0:F.message,placeholder:"https://university.edu"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["MOU Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(E,{options:C,value:C.find(a=>a.value===h("mouStatus")),onChange:O,placeholder:"Select MOU status"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Selecting MOU status will suggest default percentage values"}),e.jsx("input",{type:"hidden",...o("mouStatus",{required:"MOU status is required"})})]}),e.jsxs("div",{children:[e.jsx(m,{label:"Percentage Agreed",type:"number",min:"0",max:"100",step:"0.1",...o("percentageAgreed",{required:"Percentage agreed is required",min:{value:0,message:"Percentage cannot be negative"},max:{value:100,message:"Percentage cannot exceed 100"}}),error:(f=d.percentageAgreed)==null?void 0:f.message,placeholder:"Enter percentage (e.g., 10)",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Default: No MOU (10%), Direct Partnership (10%), Third Party (5%)"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"University Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(m,{label:"Established Year",type:"number",value:n.establishedYear,onChange:a=>i("establishedYear",a.target.value),placeholder:"e.g., 1985"}),e.jsx(m,{label:"Total Students",type:"number",value:n.studentPopulation,onChange:a=>i("studentPopulation",a.target.value),placeholder:"e.g., 25000"}),e.jsx(m,{label:"International Students",type:"number",value:n.internationalStudents,onChange:a=>i("internationalStudents",a.target.value),placeholder:"e.g., 5000"}),e.jsx(m,{label:"Number of Campuses",type:"number",value:n.campuses,onChange:a=>i("campuses",a.target.value),placeholder:"e.g., 3"}),e.jsx(m,{label:"World Ranking",value:n.ranking,onChange:a=>i("ranking",a.target.value),placeholder:"e.g., QS Top 100"}),e.jsx(m,{label:"Accreditation",value:n.accreditation,onChange:a=>i("accreditation",a.target.value),placeholder:"e.g., AACSB, EQUIS"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Programs Offered"}),e.jsx(E,{options:P,value:P.filter(a=>{var l;return(l=n.programs)==null?void 0:l.includes(a.value)}),onChange:a=>{const l=Array.isArray(a)?a.map(u=>u.value):a?[a.value]:[];i("programs",l)},placeholder:"Select programs offered",multiple:!0})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Campus Facilities"}),e.jsx(E,{options:k,value:k.filter(a=>{var l;return(l=n.facilities)==null?void 0:l.includes(a.value)}),onChange:a=>{const l=Array.isArray(a)?a.map(u=>u.value):a?[a.value]:[];i("facilities",l)},placeholder:"Select available facilities",multiple:!0})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Key Facilities"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{key:"hostelFacilities",label:"Student Housing"},{key:"sportsFacilities",label:"Sports Complex"},{key:"library",label:"Central Library"},{key:"researchFacilities",label:"Research Centers"}].map(a=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:a.key,checked:n[a.key]||!1,onChange:l=>i(a.key,l.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:a.key,className:"ml-2 text-sm text-gray-700",children:a.label})]},a.key))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admission Requirements"}),e.jsx("textarea",{value:n.admissionRequirements,onChange:a=>i("admissionRequirements",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Enter general admission requirements..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Application Deadlines"}),e.jsx("textarea",{value:n.applicationDeadlines,onChange:a=>i("applicationDeadlines",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"2",placeholder:"Enter application deadlines for different intakes..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scholarships Available"}),e.jsx("textarea",{value:n.scholarships,onChange:a=>i("scholarships",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Enter information about available scholarships..."})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(y,{type:"button",variant:"outline",onClick:q,disabled:p,children:"Cancel"}),e.jsx(y,{type:"submit",loading:p,disabled:p,children:x==="create"?"Add University":"Update University"})]})]})},Se=()=>{var M,R;const[s,v]=g.useState(!1),[q,p]=g.useState(!1),[x,n]=g.useState(null),w=z(),[o,L]=g.useState(""),[d,N]=g.useState(""),[h,S]=g.useState(""),{universities:r,loading:O,fetchUniversities:C,createUniversity:P,updateUniversity:k,deleteUniversity:i}=V();g.useEffect(()=>{C()},[]);const A=(t=null)=>{n(t),p(!0)},b=()=>{p(!1),n(null)},U=async t=>{try{v(!0),x?await k(x.id,t):await P(t),b()}catch(c){console.error("Error saving university:",c)}finally{v(!1)}},F=async(t,c)=>{if(window.confirm(`Are you sure you want to delete ${c}?`))try{await i(t)}catch(j){console.error("Error deleting university:",j)}},f=[...new Set((M=r==null?void 0:r.map(t=>t.country))==null?void 0:M.filter(Boolean))],a=r==null?void 0:r.filter(t=>{var I,B;const c=((I=t.name)==null?void 0:I.toLowerCase().includes(o.toLowerCase()))||((B=t.city)==null?void 0:B.toLowerCase().includes(o.toLowerCase())),j=!d||t.country===d,D=!h||t.mouStatus===h;return c&&j&&D}),l=t=>({none:"bg-gray-100 text-gray-800",direct:"bg-green-100 text-green-800",third_party:"bg-blue-100 text-blue-800"})[t]||"bg-gray-100 text-gray-800",u=t=>({none:"No MOU",direct:"Direct Partnership",third_party:"Third Party"})[t]||t,T=t=>{const c=parseFloat(t);return c>=10?"bg-green-100 text-green-800":c>=5?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"};return O?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(_,{className:"h-7 w-7 text-blue-600"}),"University Management"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage university partnerships, details, and course offerings"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"bg-white rounded-lg border p-3",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Universities"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r==null?void 0:r.length})]}),e.jsxs("div",{className:"bg-white rounded-lg border p-3",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Partnerships"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(R=r==null?void 0:r.filter(t=>t.mouStatus!=="none"))==null?void 0:R.length})]}),e.jsxs("div",{className:"bg-white rounded-lg border p-3",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Avg. Percentage"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(r==null?void 0:r.length)>0?(r.reduce((t,c)=>t+parseFloat(c.percentageAgreed||0),0)/r.length).toFixed(1):0,"%"]})]}),e.jsxs(y,{onClick:()=>A(),className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Add University"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative md:col-span-2",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(m,{placeholder:"Search by university name or city...",value:o,onChange:t=>L(t.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsxs("select",{value:d,onChange:t=>N(t.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none bg-white",children:[e.jsx("option",{value:"",children:"All Countries"}),f==null?void 0:f.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsx("div",{children:e.jsxs("select",{value:h,onChange:t=>S(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none bg-white",children:[e.jsx("option",{value:"",children:"All MOU Status"}),e.jsx("option",{value:"none",children:"No MOU"}),e.jsx("option",{value:"direct",children:"Direct Partnership"}),e.jsx("option",{value:"third_party",children:"Third Party"})]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Universities (",a==null?void 0:a.length,")"]})}),(a==null?void 0:a.length)===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(_,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No universities found"}),e.jsx("p",{className:"text-gray-600",children:o||d||h?"Try adjusting your search criteria":"Get started by adding your first university"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"University"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MOU Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage Agreed"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a==null?void 0:a.map(t=>{var c,j,D;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),t.website&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(Z,{className:"h-3 w-3"}),e.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:t.website.replace(/(^\w+:|^)\/\//,"")})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-900",children:[e.jsx(H,{className:"h-3 w-3 text-gray-400"}),t.city&&`${t.city}, `,t.country]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${l(t.mouStatus)}`,children:u(t.mouStatus)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${T(t.percentageAgreed)}`,children:[t.percentageAgreed||0,"%"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"space-y-1",children:[((c=t.details)==null?void 0:c.establishedYear)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"h-3 w-3"}),"Est. ",t.details.establishedYear]}),((j=t.details)==null?void 0:j.studentPopulation)&&e.jsxs("div",{children:[parseInt(t.details.studentPopulation).toLocaleString()," ","students"]}),((D=t.details)==null?void 0:D.ranking)&&e.jsx("div",{className:"text-xs text-blue-600",children:t.details.ranking})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsxs(y,{variant:"outline",size:"sm",onClick:()=>w(`/super-admin/university/${t==null?void 0:t.id}`,{state:t}),className:"flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),"View"]}),e.jsxs(y,{variant:"outline",size:"sm",onClick:()=>A(t),className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3"}),"Edit"]}),e.jsxs(y,{variant:"outline",size:"sm",onClick:()=>F(t.id,t.name),className:"flex items-center gap-1 text-red-600 border-red-200 hover:bg-red-50",children:[e.jsx(te,{className:"h-3 w-3"}),"Delete"]})]})]},t.id)})})]})})]}),e.jsx(G,{isOpen:q,onClose:b,title:x?"Edit University":"Add New University",size:"xl",children:e.jsx(re,{university:x,onSubmit:U,onCancel:b,loading:s,mode:x?"edit":"create"})})]})};export{Se as default};
