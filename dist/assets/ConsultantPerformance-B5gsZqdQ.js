import{j as e,B as o,r,u as F,y as f,L as R}from"./index-B8d-T4_g.js";import{u as V,m as v}from"./useManagerStore-BTCKwtdl.js";import{A as z}from"./AddOrEditConsultantModal--8p1qQih.js";import{X as b}from"./x-B8Viopl1.js";import{L as I}from"./LeadDetailsView-CpyO-0rM.js";import{A as U}from"./arrow-left-DVGswsLc.js";import{C as X}from"./Card-BmdFGXxf.js";import{B as $}from"./Badge-C9Vyx7sP.js";/* empty css                      */import{U as q}from"./users-B4t-nxO4.js";import{U as G}from"./user-B-VtmG-j.js";import{P as H}from"./pen-B5DQtXPX.js";import{T as J}from"./trash-2-CIGIiON9.js";import{E as K}from"./eye-Dj_O8XyO.js";import"./toDate-BKXxHYqX.js";import"./createLucideIcon-Sm81qEul.js";import"./mail-DBCuZO0A.js";import"./phone-Dncapw21.js";import"./calendar-dTGyL5Lu.js";import"./file-text-B6EFZNGF.js";import"./globe-DCEybeUw.js";import"./map-pin-KPP1ycBG.js";import"./circle-alert-DYMgXoaL.js";import"./graduation-cap-QT-6MOlN.js";import"./book-open-DLxPyMrc.js";import"./award-W7zQ5oh9.js";import"./briefcase-BKez1sn5.js";import"./target-DnVFR7EA.js";import"./house-B3pdVeck.js";import"./star-CdLzhn5W.js";import"./dollar-sign-D0cTXTw3.js";import"./info-BKXL812a.js";const Q=({isOpen:d,onClose:i,onConfirm:s,consultantName:l})=>d?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Confirm Disconnection"}),e.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:e.jsx(b,{className:"h-5 w-5"})})]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to disconnect"," ",e.jsx("span",{className:"font-medium",children:l||"this consultant"}),"?"]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(o,{variant:"outline",onClick:i,children:"Cancel"}),e.jsx(o,{variant:"danger",onClick:s,children:"Disconnect"})]})]})}):null,W=({isOpen:d,onClose:i,consultant:s})=>{const[l,n]=r.useState(null);if(!d||!s)return null;const j=a=>{n(a)},g=()=>{n(null)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l?e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:g,className:"text-gray-500 hover:text-gray-700 mr-2",children:e.jsx(U,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Lead Details"})]}):e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Leads for ",s.name||"Consultant"]}),e.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:e.jsx(b,{className:"h-5 w-5"})})]}),l?e.jsx(I,{lead:l}):e.jsx("div",{className:"overflow-x-auto max-h-[70vh] overflow-y-auto",children:s.leads.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.leads.map(a=>{var h,x,c;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:((h=a.student)==null?void 0:h.name)||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:((x=a.student)==null?void 0:x.email)||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:((c=a.student)==null?void 0:c.phone)||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:a.status||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:a.source||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(o,{size:"sm",variant:"outline",onClick:()=>j(a),children:"View Details"})})]},a.id)})})]}):e.jsx("p",{className:"text-gray-500 text-sm p-4",children:"No leads available for this consultant"})})]})})},Ae=()=>{const d=F(),{consultants:i,fetchOfficeConsultants:s,loading:l,error:n}=V(),[j,g]=r.useState([]),[a,h]=r.useState(!1),[x,c]=r.useState(!1),[C,y]=r.useState(null),[k,u]=r.useState(!1),[m,N]=r.useState(null),[L,w]=r.useState(!1),[S,M]=r.useState(null);r.useEffect(()=>{console.log("Fetching consultants and reports..."),s()},[s]),r.useEffect(()=>{n&&(console.error("Consultant error:",n),f.error(n))},[n]);const A=async t=>{try{await v.createStaffMember(t),await s()}catch(p){throw p}},D=t=>{N(t),u(!0)},O=async()=>{var t,p;try{await v.disconnectStaffMember(m.id),f.success("Consultant disconnected successfully"),await s(),u(!1),N(null)}catch(B){f.error(((p=(t=B.response)==null?void 0:t.data)==null?void 0:p.message)||"Failed to disconnect consultant")}},E=()=>{y(null),c(!0)},T=t=>{y(t),c(!0)},P=t=>{M(t),w(!0)};return l||a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(R,{size:"lg"})}):e.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Consultant"}),e.jsx("p",{className:"text-gray-600",children:"Overview of consultant performance"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(o,{variant:"outline",onClick:()=>d("/manager/schedules"),children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"View Schedules"]}),e.jsxs(o,{variant:"primary",onClick:E,children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Add Consultant"]})]})]}),e.jsx(X,{title:"Consultant Performance Metrics",className:"mt-6",children:i.length?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Consultant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Leads"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Converted Leads"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Conversion Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pending Tasks"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:t.email||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.totalLeads||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.convertedLeads||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[(((t.totalLeads>0?t.convertedLeads/t.totalLeads:0)||0)*100).toFixed(2),"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx($,{className:(t.pendingTasks||0)>5?"bg-red-100 text-red-800":(t.pendingTasks||0)>0?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",children:t.pendingTasks||0})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium flex space-x-2",children:[e.jsx("button",{onClick:()=>T(t),className:"text-blue-600 hover:text-blue-800",title:"Edit Consultant",children:e.jsx(H,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>D(t),className:"text-red-600 hover:text-red-800",title:"Disconnect Consultant",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>P(t),className:`text-gray-600 hover:text-gray-800 ${t.leads.length===0?"opacity-50 cursor-not-allowed":""}`,title:"View Leads",disabled:t.leads.length===0,children:e.jsx(K,{className:"h-4 w-4"})})]})]},t.id))})]})}):e.jsx("p",{className:"text-gray-500 text-sm p-4",children:"No consultants available"})}),e.jsx(z,{isOpen:x,onClose:()=>c(!1),consultant:C,onSubmit:A}),e.jsx(Q,{isOpen:k,onClose:()=>u(!1),onConfirm:O,consultantName:m==null?void 0:m.name}),e.jsx(W,{isOpen:L,onClose:()=>w(!1),consultant:S})]})};export{Ae as default};
